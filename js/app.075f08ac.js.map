{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?1c1b","webpack:///./src/components/DropScreen.vue?2b42","webpack:///./src/components/BookBookmark.vue?e08f","webpack:///./src/components/BookParagraph.vue?61fd","webpack:///./src/App.vue?4154","webpack:///./src/components/DropScreen.vue?8e9a","webpack:///./src/components/TheBook.vue?ba63","webpack:///./src/components/BookBookmark.vue?4c6a","webpack:///./src/helpers/bookmark.ts","webpack:///./src/components/BookBookmark.vue","webpack:///./src/components/BookHeader.vue","webpack:///./src/components/BookBookmark.vue?426b","webpack:///./src/components/BookBookmark.vue?b7cc","webpack:///./src/components/BookParagraph.vue?0af8","webpack:///src/components/BookParagraph.vue","webpack:///./src/components/BookParagraph.vue?6fec","webpack:///./src/components/BookParagraph.vue","webpack:///src/components/BookHeader.vue","webpack:///./src/components/BookHeader.vue?59c8","webpack:///./src/components/BookLineBreak.vue?e84d","webpack:///src/components/BookLineBreak.vue","webpack:///./src/components/BookLineBreak.vue?0f48","webpack:///./src/components/BookLineBreak.vue","webpack:///./src/components/TheBook.vue","webpack:///./src/components/TheBook.vue?ebd3","webpack:///./src/components/TheBook.vue?31a3","webpack:///./src/components/DropScreen.vue","webpack:///./src/components/DropScreen.vue?4906","webpack:///./src/components/DropScreen.vue?3603","webpack:///src/App.vue","webpack:///./src/App.vue?b65f","webpack:///./src/App.vue","webpack:///./src/helpers/aozora.ts","webpack:///./src/store/book.ts","webpack:///./src/store/index.ts","webpack:///./src/main.ts","webpack:///./src/components/TheBook.vue?4f79"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","tag","staticRenderFns","staticClass","on","$event","stopPropagation","preventDefault","onFileDragover","onFileDragleave","onFileDrop","isLoaded","_e","_v","_s","message","title","author","_l","text","textType","index","style","BOOKMARK_CLASS","idFromBookmark","bookmark","paragraph","node","character","bookmarkFromHash","hash","indices","match","parseInt","isNaN","insertBookmark","content","template","document","createElement","innerHTML","bookmarkNode","childNodes","textContent","console","log","charAtBookmark","sliceUntilBookmark","sliceAfterBookmark","newBookmark","appendChild","createTextNode","id","classList","add","backgroundColor","bookmarkFragment","createDocumentFragment","replaceChild","extend","pxPosition","computed","left","visibility","$store","getters","location","commit","$nextTick","bookmarkedChar","getElementById","getBoundingClientRect","requestAnimationFrame","scrollIntoView","scrollX","addEventListener","e","target","originalTarget","bubble","parentElement","contains","startsWith","paragraphIndexMatch","paragraphIndex","range","offset","textNode","caretPositionFromPoint","x","y","offsetNode","caretRangeFromPoint","startContainer","startOffset","nodeIndex","Array","indexOf","component","paragraphId","domProps","props","jisageStyle","margin","jisage","headerId","hLevel","class","components","BookBookmark","BookParagraph","BookHeader","BookLineBreak","position","encoding","methods","textComponents","updated","dispatch","TheBook","isDraggingFile","dataTransfer","files","file","type","DropScreen","todo","comments","accents","replace","rubify","furigana","boutenify","bouten","kutenkara","jiskuten","midasi","midasipattern","p1","p2","BookState","bookFile","rawLines","state","isBookmarked","actions","context","payload","Promise","resolve","reader","FileReader","onload","rawString","split","readAsText","reject","mutations","texts","divisor","metadataEnd","sagepattern","fullwidth","jisageString","String","fromCharCode","charCodeAt","owaripattern","owari","textComponent","emptyBookmark","assign","cleanTextComponent","cleanContent","namespaced","use","debug","Store","book","strict","config","productionTip","store","h","App","$mount"],"mappings":"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","file":"js/app.075f08ac.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DropScreen.vue?vue&type=style&index=0&id=d3000918&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookBookmark.vue?vue&type=style&index=0&id=388bfb12&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookParagraph.vue?vue&type=style&index=0&id=4830f37f&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('DropScreen',{tag:\"component\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"drop-wrapper\",on:{\"dragover\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onFileDragover($event)},\"dragleage\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onFileDragleave($event)},\"drop\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onFileDrop($event)}}},[_c('div',{staticClass:\"welcome-wrapper\"},[(!_vm.isLoaded)?_c('h1',{staticClass:\"welcome\"},[_vm._v(_vm._s(_vm.message))]):_vm._e()]),(_vm.isLoaded)?_c('TheBook'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"the-book-wrapper\"},[_c('div',{staticClass:\"the-book\"},[_c('BookBookmark'),_c('h1',{attrs:{\"id\":\"title\"}},[_vm._v(_vm._s(_vm.title))]),_c('h2',[_vm._v(_vm._s(_vm.author))]),_vm._l((_vm.textComponents),function(text){return _c(text.textType,{key:text.index,tag:\"component\",attrs:{\"id\":text.textType + '-' + text.index,\"text\":text}})})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bookmark-indicator\",style:(_vm.bookmarkStyle)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","interface Bookmark {\r\n    paragraph: number,\r\n    node: number,\r\n    character: number,\r\n    content?: string,\r\n}\r\n\r\nconst BOOKMARK_CLASS = 'bookmark'\r\n\r\nconst idFromBookmark = (bookmark :Bookmark) :string => {\r\n    return `p${bookmark.paragraph}n${bookmark.node}c${bookmark.character}`;\r\n}\r\n\r\nconst bookmarkFromHash = (hash :string) :Bookmark => {\r\n    var bookmark = {\r\n        paragraph:0,\r\n        node:0,\r\n        character:0,\r\n    }\r\n    var indices = hash.match(/p(\\d+)n(\\d+)c(\\d+)/)\r\n    if (indices != null) {\r\n        var paragraph = parseInt(indices[1]);\r\n        var node = parseInt(indices[2]);\r\n        var character = parseInt(indices[3]);\r\n        if (!isNaN(paragraph)) {\r\n            bookmark.paragraph = paragraph;\r\n        }\r\n        if (!isNaN(node)) {\r\n            bookmark.node = node;\r\n        }\r\n        if (!isNaN(character)) {\r\n            bookmark.character = character;\r\n        }\r\n    }\r\n    return bookmark;\r\n}\r\n\r\nconst insertBookmark = (content :string, bookmark: Bookmark) :string => {\r\n    // create a Template to parse easily\r\n    var template = document.createElement('template');\r\n    template.innerHTML = content;\r\n\r\n    // get the textNode that bookmark points to\r\n    var bookmarkNode = template.content.childNodes[bookmark.node];\r\n    if (bookmarkNode == null || bookmarkNode.textContent == null) {\r\n        console.log(`Invalid bookmark. Node with index ${bookmark.node} does not exist`);\r\n        console.log(content);\r\n        return content;\r\n    }\r\n    var charAtBookmark = bookmarkNode.textContent[bookmark.character];\r\n    if (charAtBookmark == null) {\r\n        // try the previous character\r\n        charAtBookmark = bookmarkNode.textContent[bookmark.character-1];\r\n        if (charAtBookmark == null) {\r\n            console.log(`Invalid bookmark. Character with index ${bookmark.character} does not exist`);\r\n            return content;\r\n        } else {\r\n            bookmark.character--;\r\n        }\r\n    }\r\n\r\n    // slice the node at the bookmark\r\n    var sliceUntilBookmark = bookmarkNode.textContent.slice(0, bookmark.character);\r\n    var sliceAfterBookmark = bookmarkNode.textContent.slice(bookmark.character+1);\r\n\r\n\r\n    var newBookmark = document.createElement('span') as HTMLElement;\r\n    newBookmark.appendChild(document.createTextNode(charAtBookmark));\r\n    // TODO: we can't rely on these being set if this function fails, but we're going to just assume it for now because it's easier.\r\n    newBookmark.id = idFromBookmark(bookmark);\r\n    newBookmark.classList.add(BOOKMARK_CLASS);\r\n    newBookmark.style.backgroundColor = \"red\";\r\n\r\n    // repiece the nodes together\r\n    var bookmarkFragment = document.createDocumentFragment();\r\n    if (sliceUntilBookmark != null) {\r\n        bookmarkFragment.appendChild(document.createTextNode(sliceUntilBookmark));\r\n    }\r\n    bookmarkFragment.appendChild(newBookmark);\r\n    if (sliceAfterBookmark != null) {\r\n        bookmarkFragment.appendChild(document.createTextNode(sliceAfterBookmark));\r\n    }\r\n    template.content.replaceChild(bookmarkFragment, bookmarkNode);\r\n    return template.innerHTML;\r\n}\r\n\r\nexport {\r\n    BOOKMARK_CLASS,\r\n    Bookmark,\r\n    insertBookmark,\r\n    idFromBookmark,\r\n    bookmarkFromHash,\r\n}","\n\n\n\n\n\n\n\r\nimport Vue from 'vue'\r\nimport { bookmarkFromHash, idFromBookmark } from '../helpers/bookmark'\r\n\r\nexport default Vue.extend({\r\n    name: 'BookBookmark',\r\n    \r\n    data() {\r\n        return {\r\n            pxPosition: 0,\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        bookmarkStyle() :Partial<CSSStyleDeclaration> {\r\n            return {\r\n                left: this.pxPosition + 'px',\r\n                visibility: this.$store.getters['book/isBookmarked'] ? 'visible' : 'hidden',\r\n            }\r\n        }\r\n    },\r\n\r\n    created() {\r\n        var bookmark = bookmarkFromHash(location.hash);\r\n        if (bookmark.paragraph != null && (bookmark.paragraph + bookmark.character + bookmark.node > 0)) {\r\n            this.$store.commit('book/loadBookmark', bookmark);\r\n            this.$nextTick(function() {\r\n                var id = idFromBookmark(bookmark);\r\n                var bookmarkedChar = document.getElementById(id);\r\n                if (bookmarkedChar != null) {\r\n                    this.pxPosition = bookmarkedChar.getBoundingClientRect().left;\r\n                    location.hash = \"\";\r\n                    location.hash = id;\r\n                }\r\n            });\r\n        } else {\r\n            // the next animation frame takes a really long time for long books, so use this to render it when the page repaints\r\n            requestAnimationFrame(() => {\r\n                var title = document.getElementById(\"title\");\r\n                if (title == null) {\r\n                    console.log(\"Book doesn't have a title for some reason...\")\r\n                } else {\r\n                    title.scrollIntoView();\r\n                    this.pxPosition = window.scrollX + title.getBoundingClientRect().left;\r\n                }\r\n            })\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        window.addEventListener('mousedown', (e) => {\r\n            var target = e.target as HTMLElement;\r\n            var originalTarget = target;\r\n            var bubble = target;\r\n            while (bubble.parentElement != null) {\r\n                if (bubble.classList.contains('paragraph')) {\r\n                    break;\r\n                }\r\n                bubble = bubble.parentElement;\r\n            }\r\n            if (bubble.parentElement == null) {\r\n                // target not a bookmarkable element, or any of its ancestors\r\n                return\r\n            }\r\n            target = bubble;\r\n            if (!target.id.startsWith('BookParagraph')) {\r\n                console.log(\"didn't click on what we expected. Logging target for debug info\")\r\n                console.log(target)\r\n                return\r\n            }\r\n            var paragraphIndexMatch = target.id.match(/(\\d+)/);\r\n            if (paragraphIndexMatch == null) {\r\n                console.log(\"couldn't get paragraph index from id. Logging target for debug info\")\r\n                console.log(target)\r\n                return\r\n            }\r\n            var paragraphIndex = parseInt(paragraphIndexMatch[0]);\r\n\r\n            this.$store.commit('book/removeBookmark');\r\n            this.$nextTick(function() {\r\n                var range: Range | CaretPosition;\r\n                var offset: number;\r\n                var textNode: Node;\r\n                if (document.caretPositionFromPoint) {    // Firefox\r\n                    range = document.caretPositionFromPoint(e.x,e.y) as CaretPosition;\r\n                    textNode = range.offsetNode;\r\n                    offset = range.offset;\r\n                } else if (document.caretRangeFromPoint) {     // Chromium-based\r\n                    range = document.caretRangeFromPoint(e.x,e.y) as Range;\r\n                    textNode = range.startContainer;\r\n                    offset = range.startOffset;\r\n                } else {\r\n                    console.log('unsupported browser')\r\n                    return\r\n                }\r\n                var nodeIndex: number = Array.prototype.indexOf.call(originalTarget.childNodes, textNode);\r\n                if (nodeIndex == -1) {\r\n                    return;\r\n                }\r\n                var bookmark = {\r\n                    paragraph: paragraphIndex,\r\n                    node: nodeIndex,\r\n                    character: offset,\r\n                }\r\n                location.hash = idFromBookmark(bookmark);\r\n                this.$store.commit('book/loadBookmark', bookmark);\r\n                this.$nextTick(function() {\r\n                    this.pxPosition = window.scrollX + e.x;\r\n                })\r\n                \r\n\r\n            })\r\n        })\r\n    }\r\n\r\n    \r\n});\r\n\r\n","var render, staticRenderFns\nimport script from \"./BookHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./BookHeader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookBookmark.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookBookmark.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BookBookmark.vue?vue&type=template&id=388bfb12&scoped=true&\"\nimport script from \"./BookBookmark.vue?vue&type=script&lang=ts&\"\nexport * from \"./BookBookmark.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./BookBookmark.vue?vue&type=style&index=0&id=388bfb12&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"388bfb12\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"paragraph text-component\",style:(_vm.jisageStyle),attrs:{\"id\":_vm.paragraphId},domProps:{\"innerHTML\":_vm._s(_vm.text.content)}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div\r\n        v-bind:id=\"paragraphId\"\r\n        v-html=\"text.content\"\r\n        v-bind:style=\"jisageStyle\"\r\n        class=\"paragraph text-component\"\r\n    ></div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n    name: 'BookParagraph',\r\n    props: ['text'],\r\n    data: function () {\r\n        return {\r\n            paragraphId: this.text.index + '-paragraph',\r\n            jisageStyle: {\r\n                margin: this.text.jisage + \"em 0 0 0\"\r\n            }\r\n        }\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n    .paragraph {\r\n        text-align:justify;\r\n        word-wrap:break-word;\r\n        background-color:rgb(241, 237, 212);\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookParagraph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookParagraph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookParagraph.vue?vue&type=template&id=4830f37f&scoped=true&\"\nimport script from \"./BookParagraph.vue?vue&type=script&lang=js&\"\nexport * from \"./BookParagraph.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BookParagraph.vue?vue&type=style&index=0&id=4830f37f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4830f37f\",\n  null\n  \n)\n\nexport default component.exports","<script>\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n        props: ['text'],\r\n        data: function() {\r\n            return {\r\n                headerId: \"header-\" + this.text.index,\r\n            }\r\n        },\r\n        render: function(createElement) {\r\n            return createElement(\r\n                'h' + this.text.hLevel,\r\n                {\r\n                    id: this.text.content,\r\n                    class: {\r\n                        'header': true,\r\n                        'text-component': true,\r\n                    },\r\n                    style: {\r\n                        margin: this.text.jisage + \"em 0 0 0\",\r\n                    },\r\n                    key: this.text.index,\r\n                },\r\n                this.text.content,\r\n            )\r\n        },\r\n});\r\n</script>\r\n    });\r\n    <style>\r\n    </style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookHeader.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('br')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <br>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n    name: 'BookLineBreak',\r\n    props: [\"text\"],\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookLineBreak.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookLineBreak.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookLineBreak.vue?vue&type=template&id=f9e0cc8e&scoped=true&\"\nimport script from \"./BookLineBreak.vue?vue&type=script&lang=js&\"\nexport * from \"./BookLineBreak.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f9e0cc8e\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport BookBookmark from './BookBookmark.vue'\r\nimport BookParagraph from './BookParagraph.vue'\r\nimport BookHeader from './BookHeader.vue'\r\nimport BookLineBreak from './BookLineBreak.vue'\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n    name: 'TheBook',\r\n\r\n    components: {\r\n        BookBookmark: BookBookmark,\r\n        BookParagraph: BookParagraph,\r\n        BookHeader: BookHeader,\r\n        BookLineBreak: BookLineBreak,\r\n    },\r\n\r\n    data: function() {\r\n        return {\r\n            position: 0,\r\n            encoding: 'shift-jis',\r\n        }\r\n    },\r\n\r\n    methods: {\r\n    },\r\n\r\n    computed: {\r\n        isLoaded: function() {\r\n            return this.$store.getters['book/isLoaded']\r\n        },\r\n        title: function () {\r\n            return this.$store.getters['book/title']\r\n        },\r\n        author: function() {\r\n            return this.$store.getters['book/author']\r\n        },\r\n        textComponents: function() {\r\n            return this.$store.getters['book/textComponents']\r\n        },\r\n    },\r\n\r\n    updated: function() {\r\n        console.log('updated in component')\r\n        this.$store.dispatch('book/updated');\r\n    },\r\n\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheBook.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheBook.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TheBook.vue?vue&type=template&id=3c6a7aac&scoped=true&\"\nimport script from \"./TheBook.vue?vue&type=script&lang=ts&\"\nexport * from \"./TheBook.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TheBook.vue?vue&type=style&index=0&id=3c6a7aac&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c6a7aac\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport TheBook from './TheBook.vue'\r\nimport Vue from 'vue'\r\nexport default Vue.extend({\r\n    name: 'DropScreen',\r\n    components: {\r\n        TheBook\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            isDraggingFile: false,\r\n            message:\"Drag and drop unzipped Aozora Bunko text file\",\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        isLoaded() { return this.$store.getters['book/isLoaded']},\r\n    },\r\n\r\n    methods: {\r\n        onFileDragover() {\r\n            this.isDraggingFile = true;\r\n        },\r\n        onFileDragleave() {\r\n            this.isDraggingFile = false;\r\n        },\r\n        onFileDrop(e :DragEvent) {\r\n            this.isDraggingFile = false;\r\n            this.message = \"loading\"\r\n            if (e.dataTransfer) {\r\n                for (var i = 0; i < e.dataTransfer.files.length; i++) {\r\n                    var file = e.dataTransfer.files[i];\r\n                    this.$store.dispatch({\r\n                        type: 'book/loadFromFile',\r\n                        file: file,\r\n                        encoding: 'shift-jis',\r\n                    })\r\n                }\r\n            }\r\n        },\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DropScreen.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DropScreen.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DropScreen.vue?vue&type=template&id=d3000918&scoped=true&\"\nimport script from \"./DropScreen.vue?vue&type=script&lang=ts&\"\nexport * from \"./DropScreen.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DropScreen.vue?vue&type=style&index=0&id=d3000918&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d3000918\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <component :is=\"'DropScreen'\"/>\n  </div>\n</template>\n\n<script>\nimport DropScreen from './components/DropScreen.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    DropScreen,\n  }\n}\n</script>\n\n<style>\nhtml, body, #app {\n  background-color:rgb(241, 237, 212);\n  height: 100%;\n  width: 100%;\n  padding: 0;\n  margin: 0;\n  position:absolute;\n}\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=62a5a4a2&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const todo = function(text :string) {\r\n    // TODO: these are the other formatting options that I haven't implemented yet, but just remove for now\r\n    var comments = /［＃.+?］/g\r\n    var accents = /[〔〕]/g\r\n    text = text.replace(comments, \"\")\r\n    text = text.replace(accents, \"\")\r\n    return text\r\n}\r\nconst rubify = function(text :string) {\r\n    // hiragana katakana fw-roman hw-katakana unicodes:\r\n    // \\u3040-\\u309f\\u30a0-\\u30ff\\uff00-\\uff9f\r\n    //｜ is the kanji separator (different from ascii pipe |)\r\n    var furigana = /｜?([々\\u4e00-\\u9faf\\u3400-\\u4dbf]+?)《(.+?)》/g;\r\n    return text.replace(furigana, '<ruby>$1<rt>$2</rt></ruby>');\r\n}\r\nconst boutenify = function(text :string) {\r\n    var bouten = /(.+?)［＃「\\1」に傍点］/g;\r\n    return text.replace(bouten, '<span class=\"sesame-vertical\">$1</span>')\r\n}\r\nconst kutenkara = function(text :string) {\r\n    // TODO: actually convert the jis kuten codes\r\n    // TODO: non-kanji and unicode\r\n    var jiskuten = /※［＃(?:「(.+?)」、)?第(\\d+?)水準(\\d+?)-(\\d+?)-(\\d+?)］/g\r\n    return text.replace(jiskuten, \"※\")\r\n}\r\nconst midasi = function(text :string) {\r\n    var midasipattern = /(.+?)［＃「\\1」は([大中小])見出し］/g\r\n    return text.replace(midasipattern, function(match, p1, p2) {\r\n        switch(p2) {\r\n            case \"大\":\r\n                return '<h1>' + p1 + '</h1>';\r\n            case \"中\":\r\n                return '<h2>' + p1 + '</h2>';\r\n            case \"小\":\r\n                return '<h3>' + p1 + '</h3>';\r\n        }\r\n        console.log('Error replacing midasi pattern. Text: ' + text)\r\n        return ''\r\n    })\r\n}\r\nexport {\r\n    todo,\r\n    rubify,\r\n    midasi,\r\n    kutenkara,\r\n    boutenify,\r\n}\r\n","import { todo, rubify, midasi, boutenify, kutenkara } from '../helpers/aozora'\r\nimport { Bookmark, insertBookmark } from '../helpers/bookmark'\r\n\r\nexport interface TextComponent {\r\n    jisage: number,\r\n    index: number,\r\n    hLevel: number,\r\n    content: string\r\n    textType: string,\r\n}\r\n\r\ninterface BookContext {\r\n    commit: Function\r\n    state: BookState\r\n    dispatch: Function\r\n}\r\n\r\nexport class BookState {\r\n    bookFile: BookFile | null = null;\r\n    bookmark: Bookmark = {\r\n        paragraph: 0,\r\n        node: 0,\r\n        character: 0,\r\n    };\r\n    rawLines: string[] = [];\r\n    textComponents: Array<TextComponent> = [];\r\n}\r\n\r\n\r\nexport interface BookFile {\r\n    file: File,\r\n    encoding: string,\r\n}\r\n\r\nconst state = () :BookState => new BookState();\r\n\r\n// getters\r\nconst getters = {\r\n    bookmark: (state :BookState) :Bookmark => {\r\n        return state.bookmark\r\n    },\r\n\r\n    isBookmarked: (state :BookState) :boolean => {\r\n        return state.bookmark.content != null;\r\n    },\r\n\r\n    isLoaded: (state :BookState) :boolean => (\r\n        state.rawLines.length > 0\r\n    ),\r\n\r\n    title: (state :BookState) :string => (\r\n        state.rawLines.length >= 2 ? state.rawLines[0] : ''\r\n    ),\r\n\r\n    author: (state :BookState) :string => (\r\n        state.rawLines.length >= 2 ? state.rawLines[1] : ''\r\n    ),\r\n\r\n    rawLines: (state :BookState) :Array<string> => {\r\n        return state.rawLines;\r\n    },\r\n\r\n    textComponents: (state :BookState) :Array<TextComponent> => {\r\n        return state.textComponents;\r\n    }\r\n}\r\n\r\n\r\n// actions\r\nconst actions = {\r\n    updated () {\r\n        console.log('updated')\r\n    },\r\n    loadFromFile (context :BookContext, payload :BookFile) {\r\n        return new Promise((resolve) => {\r\n            var reader = new FileReader();\r\n            reader.onload = () => {\r\n                var rawString = reader.result as string;\r\n                context.commit('loadRawLines', rawString.split(/\\r?\\n/))\r\n                context.commit('loadFile', payload)\r\n                resolve();\r\n            };\r\n            reader.readAsText(payload.file, payload.encoding);\r\n        });\r\n    },\r\n    reloadWithEncoding (context :BookContext, payload :string) {\r\n        return new Promise((resolve, reject) => {\r\n            var reader = new FileReader();\r\n            reader.onload = () => {\r\n                var rawString = reader.result as string;\r\n                context.commit('loadRawLines', rawString.split(/\\r?\\n/))\r\n                resolve();\r\n            };\r\n            if (context.state.bookFile != null) {\r\n                reader.readAsText(context.state.bookFile.file, payload);\r\n            } else {\r\n                reject();\r\n            }\r\n        });\r\n    },\r\n}\r\n\r\n// mutations\r\nconst mutations = {\r\n    loadRawLines (state :BookState, payload :Array<string>) {\r\n        state.rawLines = payload\r\n        var texts = [];\r\n        if (state.rawLines.length == 0) {\r\n            state.textComponents = [];\r\n        }\r\n\r\n        // metadata\r\n        var divisor = /^-----/;\r\n        var metadataEnd = 4;\r\n        // arbitrarily stop at 100 (or EOF). If we hit 100, something is wrong so just include the metadata\r\n        for (var i = metadataEnd; i < 100 && i < state.rawLines.length; i++) {\r\n            if (state.rawLines[i].match(divisor)) {\r\n                metadataEnd = i\r\n                break\r\n            }\r\n        }\r\n        var jisage = 0;\r\n        var paragraphIndex = 0;\r\n        for (i = metadataEnd + 1; i < state.rawLines.length; i++) {\r\n            // the text props we will pass to the BookParagraph component\r\n            var text :TextComponent = {\r\n                jisage: jisage,\r\n                index: paragraphIndex,\r\n                content: \"\",\r\n                textType: 'BookParagraph',\r\n                hLevel: 0,\r\n            }\r\n            var content = state.rawLines[i]\r\n            // line break\r\n            if (content === \"\") {\r\n                text.textType = 'BookLineBreak';\r\n                texts.push(text);\r\n                paragraphIndex++;\r\n                continue;\r\n            }\r\n\r\n            // first, check if it's a formatting line\r\n            var sagepattern = /^［＃(ここから)?([０-９]+?)字下げ］/\r\n            var fullwidth = content.match(sagepattern)\r\n            if (fullwidth) {\r\n                var jisageString = String.fromCharCode(fullwidth[2].charCodeAt(0) - 0xFEE0)\r\n                jisage = parseInt(jisageString)\r\n                // if ここから then continue, else change jisage for the current line\r\n                if (fullwidth[1]) {\r\n                    continue\r\n                } else {\r\n                    text.jisage = jisage\r\n                    jisage = 0\r\n                    content.replace(sagepattern, \"\")\r\n                }\r\n            }\r\n            var owaripattern = /^［＃ここで字下げ終わり］/\r\n            var owari = content.match(owaripattern)\r\n            if (owari) {\r\n                jisage = 0\r\n                continue\r\n            }\r\n\r\n            // next, do things like simple search and replace\r\n            content = kutenkara(content)\r\n            content = rubify(content)\r\n            content = boutenify(content)\r\n            content = midasi(content)\r\n            content = todo(content)\r\n\r\n            // add bookmark if available\r\n            if (state.bookmark.paragraph === i) {\r\n                content = insertBookmark(content, state.bookmark);\r\n            }\r\n\r\n            if (content) {\r\n                text.content = content\r\n                texts.push(text);\r\n                paragraphIndex++;\r\n            }\r\n        }\r\n        state.textComponents = texts;\r\n    },\r\n\r\n    loadContent (state :BookState, payload :{index:number, content:string}) {\r\n        var textComponent = state.textComponents[payload.index];\r\n        if (textComponent != null) {\r\n            textComponent.content = payload.content;\r\n        } else {\r\n            console.log(`index ${payload.index} out of range for state.textComponents`)\r\n        }\r\n    },\r\n\r\n    removeBookmark (state :BookState) {\r\n        if (state.bookmark.content != null) {\r\n            state.textComponents[state.bookmark.paragraph].content = state.bookmark.content;\r\n            let emptyBookmark = {paragraph:0,node:0,character:0,content:null};\r\n            Object.assign(state.bookmark,emptyBookmark)\r\n        } else {\r\n            // bookmark doesn't exist\r\n        }\r\n    },\r\n\r\n    loadBookmark (state :BookState, bookmark :Bookmark) {\r\n        if (state.bookmark.content == null) {\r\n            var cleanTextComponent = state.textComponents[bookmark.paragraph]\r\n            if (cleanTextComponent == null) {\r\n                console.log(`Bookmark paragraph  ${bookmark.paragraph} out of range`)\r\n                return\r\n            }\r\n            var cleanContent = cleanTextComponent.content;\r\n            cleanTextComponent.content = insertBookmark(cleanContent, bookmark);\r\n            bookmark.content = cleanContent;\r\n            Object.assign(state.bookmark, bookmark);\r\n        } else {\r\n            console.log(\"Error, bookmark already loaded. Please remove it first\")\r\n            return;\r\n        }\r\n    },\r\n\r\n    loadFile (state :BookState, payload :BookFile) {\r\n        state.bookFile = payload ;\r\n    },\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  actions,\r\n  getters,\r\n  mutations\r\n}","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport book from './book'\r\n\r\nVue.use(Vuex)\r\n\r\nconst debug = process.env.NODE_ENV !== 'production'\r\n\r\nexport default new Vuex.Store({\r\n  modules: {\r\n      book,\r\n  },\r\n  strict: debug,\r\n})\r\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport App from './App.vue'\nimport store from './store'\n\nVue.config.productionTip = false;\nVue.use(Vuex);\n\nnew Vue({\n  store,\n  render: function (h) { return h(App) },\n}).$mount('#app');","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheBook.vue?vue&type=style&index=0&id=3c6a7aac&scoped=true&lang=css&\""],"sourceRoot":""}